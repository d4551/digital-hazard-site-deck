/* Dramatic Presentation Effects - Glitches, Animations, and Visual Impact */

/* Chromatic Aberration Glitch Effect */
@keyframes chromaticAberration {
    0%, 100% {
        filter: blur(0px) contrast(1);
        transform: translate(0, 0);
    }
    10% {
        filter: blur(0.5px) contrast(1.2);
        transform: translate(-2px, 1px);
    }
    20% {
        filter: blur(1px) contrast(1.5);
        transform: translate(2px, -1px);
    }
    30% {
        filter: blur(0.8px) contrast(1.3);
        transform: translate(-1px, 2px);
    }
    40% {
        filter: blur(1.2px) contrast(1.6);
        transform: translate(1px, -2px);
    }
    50% {
        filter: blur(0.5px) contrast(1.2);
        transform: translate(-1px, 1px);
    }
    60% {
        filter: blur(1px) contrast(1.4);
        transform: translate(1px, 1px);
    }
    70% {
        filter: blur(0.7px) contrast(1.3);
        transform: translate(-1px, -1px);
    }
    80% {
        filter: blur(1.1px) contrast(1.5);
        transform: translate(1px, -1px);
    }
    90% {
        filter: blur(0.3px) contrast(1.1);
        transform: translate(0, 0);
    }
}

.chromatic-glitch {
    animation: chromaticAberration 0.5s ease-in-out;
    position: relative;
    will-change: filter, transform;
}

.chromatic-glitch::before,
.chromatic-glitch::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.chromatic-glitch::before {
    clip-path: inset(0 0 0 0);
    transform: translate(-2px, 0);
    color: #ff0080;
    mix-blend-mode: screen;
    animation: rgbShiftBefore 0.3s ease-in-out;
}

.chromatic-glitch::after {
    clip-path: inset(0 0 0 0);
    transform: translate(2px, 0);
    color: #00ffff;
    mix-blend-mode: screen;
    animation: rgbShiftAfter 0.3s ease-in-out;
}

@keyframes rgbShiftBefore {
    0%, 100% { transform: translate(-2px, 0); opacity: 0.8; }
    50% { transform: translate(-4px, 1px); opacity: 1; }
}

@keyframes rgbShiftAfter {
    0%, 100% { transform: translate(2px, 0); opacity: 0.8; }
    50% { transform: translate(4px, -1px); opacity: 1; }
}

/* Scan Line Effect */
@keyframes scanLine {
    0% {
        transform: translateY(-100%);
        opacity: 0.8;
    }
    50% {
        opacity: 1;
    }
    100% {
        transform: translateY(100vh);
        opacity: 0.8;
    }
}

.scan-line {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(
        to bottom,
        transparent,
        rgba(0, 255, 255, 0.8),
        transparent
    );
    pointer-events: none;
    z-index: calc(var(--z-presentation-modals) + 50);
    animation: scanLine 2s linear;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

/* Screen distortion pulses layered on top of shake */
@keyframes screenDistortionSoft {
    0% {
        filter: none;
        transform: none;
    }
    20% {
        filter: contrast(1.1) saturate(1.05) hue-rotate(3deg);
        transform: translate3d(-1px, 0, 0);
    }
    40% {
        filter: contrast(1.2) saturate(1.1) hue-rotate(-4deg);
        transform: translate3d(1px, -1px, 0);
    }
    70% {
        filter: contrast(1.05) saturate(1.05);
        transform: translate3d(-1px, 1px, 0);
    }
    100% {
        filter: none;
        transform: none;
    }
}

@keyframes screenDistortion {
    0% {
        filter: none;
        transform: none;
    }
    15% {
        filter: contrast(1.35) saturate(1.2) hue-rotate(6deg);
        transform: translate3d(-3px, 1px, 0) skewX(0.6deg);
    }
    35% {
        filter: brightness(1.1) contrast(1.4) saturate(1.2);
        transform: translate3d(3px, -2px, 0) skewX(-0.8deg);
    }
    55% {
        filter: contrast(1.3) saturate(1.15) hue-rotate(-5deg);
        transform: translate3d(-2px, 1px, 0);
    }
    80% {
        filter: brightness(1.15) contrast(1.4);
        transform: translate3d(2px, 0, 0);
    }
    100% {
        filter: none;
        transform: none;
    }
}

@keyframes screenDistortionStrong {
    0% {
        filter: none;
        transform: none;
    }
    12% {
        filter: brightness(1.2) contrast(1.5) saturate(1.3) hue-rotate(8deg);
        transform: translate3d(-4px, 2px, 0) skewX(1deg);
    }
    28% {
        filter: brightness(1.15) contrast(1.6) saturate(1.25) hue-rotate(-10deg);
        transform: translate3d(4px, -3px, 0) skewX(-1deg);
    }
    48% {
        filter: contrast(1.45) saturate(1.4);
        transform: translate3d(-3px, 2px, 0);
    }
    68% {
        filter: brightness(1.2) contrast(1.5) saturate(1.3);
        transform: translate3d(2px, -2px, 0) skewX(0.8deg);
    }
    100% {
        filter: none;
        transform: none;
    }
}

@keyframes glitchSlicesSoft {
    0% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
    25% {
        opacity: 0.35;
        clip-path: inset(5% 0 65% 0);
        transform: translate3d(-2px, -1px, 0);
    }
    50% {
        opacity: 0.25;
        clip-path: inset(40% 0 30% 0);
        transform: translate3d(1px, 2px, 0);
    }
    75% {
        opacity: 0.2;
        clip-path: inset(60% 0 10% 0);
        transform: translate3d(-1px, 0, 0);
    }
    100% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitchSlices {
    0% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
    20% {
        opacity: 0.45;
        clip-path: inset(8% 0 55% 0);
        transform: translate3d(-3px, -2px, 0);
    }
    40% {
        opacity: 0.4;
        clip-path: inset(35% 0 25% 0);
        transform: translate3d(3px, 2px, 0);
    }
    60% {
        opacity: 0.35;
        clip-path: inset(65% 0 5% 0);
        transform: translate3d(-2px, 1px, 0);
    }
    80% {
        opacity: 0.3;
        clip-path: inset(15% 0 70% 0);
        transform: translate3d(2px, -1px, 0);
    }
    100% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitchSlicesStrong {
    0% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
    18% {
        opacity: 0.6;
        clip-path: inset(12% 0 50% 0);
        transform: translate3d(-4px, -3px, 0);
    }
    36% {
        opacity: 0.55;
        clip-path: inset(30% 0 32% 0);
        transform: translate3d(4px, 3px, 0);
    }
    56% {
        opacity: 0.5;
        clip-path: inset(62% 0 12% 0);
        transform: translate3d(-3px, 2px, 0);
    }
    78% {
        opacity: 0.45;
        clip-path: inset(20% 0 65% 0);
        transform: translate3d(3px, -2px, 0);
    }
    100% {
        opacity: 0;
        clip-path: inset(0 0 100% 0);
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitchRGBSoft {
    0% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
    30% {
        opacity: 0.3;
        transform: translate3d(2px, -1px, 0);
    }
    60% {
        opacity: 0.25;
        transform: translate3d(-2px, 1px, 0);
    }
    100% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitchRGB {
    0% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
    25% {
        opacity: 0.45;
        transform: translate3d(3px, -2px, 0);
    }
    55% {
        opacity: 0.35;
        transform: translate3d(-3px, 2px, 0);
    }
    85% {
        opacity: 0.3;
        transform: translate3d(2px, -3px, 0);
    }
    100% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitchRGBStrong {
    0% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
    22% {
        opacity: 0.6;
        transform: translate3d(4px, -3px, 0);
    }
    50% {
        opacity: 0.5;
        transform: translate3d(-4px, 3px, 0);
    }
    78% {
        opacity: 0.45;
        transform: translate3d(3px, -4px, 0);
    }
    100% {
        opacity: 0;
        transform: translate3d(0, 0, 0);
    }
}

body.screen-distortion-soft,
body.screen-distortion,
body.screen-distortion-strong {
    animation-fill-mode: forwards;
    animation-timing-function: steps(2, end);
}

body.screen-distortion-soft {
    animation-name: screenDistortionSoft;
    animation-duration: 0.45s;
}

body.screen-distortion {
    animation-name: screenDistortion;
    animation-duration: 0.6s;
}

body.screen-distortion-strong {
    animation-name: screenDistortionStrong;
    animation-duration: 0.75s;
}

body.screen-distortion-soft::before,
body.screen-distortion::before,
body.screen-distortion-strong::before,
body.screen-distortion-soft::after,
body.screen-distortion::after,
body.screen-distortion-strong::after {
    content: '';
    position: fixed;
    inset: -2%;
    pointer-events: none;
    z-index: calc(var(--z-presentation-modals) + 40);
    mix-blend-mode: screen;
    opacity: 0;
}

body.screen-distortion-soft::before {
    background: linear-gradient(180deg, rgba(0, 255, 255, 0.3) 0%, rgba(255, 0, 128, 0.25) 100%);
    animation: glitchSlicesSoft 0.5s steps(2, end);
}

body.screen-distortion::before {
    background: linear-gradient(180deg, rgba(0, 255, 255, 0.4) 0%, rgba(255, 0, 128, 0.35) 100%);
    animation: glitchSlices 0.65s steps(3, end);
}

body.screen-distortion-strong::before {
    background: linear-gradient(180deg, rgba(0, 255, 255, 0.5) 0%, rgba(255, 0, 128, 0.45) 100%);
    animation: glitchSlicesStrong 0.8s steps(4, end);
}

body.screen-distortion-soft::after {
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.05) 0px,
        rgba(0, 0, 0, 0.05) 2px,
        transparent 2px,
        transparent 4px
    );
    animation: glitchRGBSoft 0.5s steps(2, end);
}

body.screen-distortion::after {
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.08) 0px,
        rgba(0, 0, 0, 0.08) 2px,
        transparent 2px,
        transparent 5px
    );
    animation: glitchRGB 0.65s steps(3, end);
}

body.screen-distortion-strong::after {
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.12) 0px,
        rgba(0, 0, 0, 0.12) 3px,
        transparent 3px,
        transparent 6px
    );
    animation: glitchRGBStrong 0.8s steps(4, end);
}

/* Data Corruption Glitch */
@keyframes dataCorruption {
    0%, 100% {
        clip-path: inset(0 0 0 0);
        filter: hue-rotate(0deg);
    }
    10% {
        clip-path: inset(10% 5% 10% 5%);
        filter: hue-rotate(90deg) contrast(1.5);
    }
    20% {
        clip-path: inset(5% 10% 5% 10%);
        filter: hue-rotate(180deg) contrast(2);
    }
    30% {
        clip-path: inset(15% 2% 15% 2%);
        filter: hue-rotate(270deg) contrast(1.8);
    }
    40% {
        clip-path: inset(2% 15% 2% 15%);
        filter: hue-rotate(360deg) contrast(2.2);
    }
    50% {
        clip-path: inset(8% 8% 8% 8%);
        filter: hue-rotate(180deg) contrast(1.6);
    }
    60% {
        clip-path: inset(3% 12% 3% 12%);
        filter: hue-rotate(90deg) contrast(1.9);
    }
    70% {
        clip-path: inset(12% 3% 12% 3%);
        filter: hue-rotate(270deg) contrast(2.1);
    }
    80% {
        clip-path: inset(6% 6% 6% 6%);
        filter: hue-rotate(45deg) contrast(1.7);
    }
    90% {
        clip-path: inset(0 0 0 0);
        filter: hue-rotate(0deg);
    }
}

.data-corruption {
    animation: dataCorruption 0.6s ease-in-out;
    will-change: clip-path, filter;
}

/* Screen Shake (Dramatic) */
@keyframes dramaticShake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    2% { transform: translate(-10px, -10px) rotate(-1deg); }
    4% { transform: translate(10px, 10px) rotate(1deg); }
    6% { transform: translate(-8px, 8px) rotate(-0.8deg); }
    8% { transform: translate(8px, -8px) rotate(0.8deg); }
    10% { transform: translate(-6px, -6px) rotate(-0.5deg); }
    12% { transform: translate(6px, 6px) rotate(0.5deg); }
    14% { transform: translate(-4px, 4px) rotate(-0.3deg); }
    16% { transform: translate(4px, -4px) rotate(0.3deg); }
    18% { transform: translate(-2px, -2px) rotate(-0.1deg); }
    20% { transform: translate(2px, 2px) rotate(0.1deg); }
    22%, 100% { transform: translate(0, 0) rotate(0deg); }
}

.dramatic-shake {
    animation: dramaticShake 0.8s ease-out;
}

/* Screen Flash (Color Variants) */
@keyframes screenFlash {
    0%, 100% { opacity: 0; }
    10% { opacity: 0.9; }
    20% { opacity: 0.3; }
    30% { opacity: 0.8; }
    40% { opacity: 0.2; }
    50% { opacity: 0.7; }
    60% { opacity: 0.1; }
    70% { opacity: 0.5; }
    80% { opacity: 0; }
}

.screen-flash {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: calc(var(--z-presentation-modals) + 100);
    mix-blend-mode: screen;
    animation: screenFlash 0.4s ease-out;
}

.screen-flash.primary {
    background: radial-gradient(circle, hsl(var(--p)) 0%, transparent 70%);
}

.screen-flash.success {
    background: radial-gradient(circle, hsl(var(--su)) 0%, transparent 70%);
}

.screen-flash.warning {
    background: radial-gradient(circle, hsl(var(--wa)) 0%, transparent 70%);
}

.screen-flash.error {
    background: radial-gradient(circle, hsl(var(--er)) 0%, transparent 70%);
}

.screen-flash.rainbow {
    background: radial-gradient(circle, 
        #ff0080 0%,
        #ff8000 20%,
        #ffff00 40%,
        #00ff00 60%,
        #00ffff 80%,
        transparent 100%
    );
}

/* Radial Burst (Enhanced) */
@keyframes radialBurstEnhanced {
    0% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
        filter: blur(0px);
    }
    20% {
        opacity: 1;
        transform: scale(1.2) rotate(90deg);
        filter: blur(2px);
    }
    40% {
        opacity: 0.8;
        transform: scale(1.8) rotate(180deg);
        filter: blur(4px);
    }
    60% {
        opacity: 0.6;
        transform: scale(2.4) rotate(270deg);
        filter: blur(6px);
    }
    80% {
        opacity: 0.3;
        transform: scale(3) rotate(360deg);
        filter: blur(8px);
    }
    100% {
        opacity: 0;
        transform: scale(4) rotate(450deg);
        filter: blur(10px);
    }
}

.radial-burst-enhanced {
    position: fixed;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    pointer-events: none;
    z-index: calc(var(--z-presentation-modals) + 80);
    animation: radialBurstEnhanced 1.2s ease-out forwards;
    background: radial-gradient(circle, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(249, 115, 22, 0.7) 30%,
        rgba(168, 85, 247, 0.5) 60%,
        transparent 100%
    );
}

/* Glitch Text Effect */
@keyframes glitchText {
    0%, 100% {
        transform: translate(0);
        text-shadow: 0 0 0 currentColor;
    }
    10% {
        transform: translate(-2px, 1px);
        text-shadow: -2px 0 #ff0080, 2px 2px #00ffff;
    }
    20% {
        transform: translate(2px, -1px);
        text-shadow: 2px 0 #ff0080, -2px -2px #00ffff;
    }
    30% {
        transform: translate(-1px, 2px);
        text-shadow: -1px 0 #ff0080, 1px 2px #00ffff;
    }
    40% {
        transform: translate(1px, -2px);
        text-shadow: 1px 0 #ff0080, -1px -2px #00ffff;
    }
    50% {
        transform: translate(-1px, 1px);
        text-shadow: -1px 0 #ff0080, 1px 1px #00ffff;
    }
    60% {
        transform: translate(1px, 1px);
        text-shadow: 1px 0 #ff0080, -1px 1px #00ffff;
    }
    70% {
        transform: translate(-1px, -1px);
        text-shadow: -1px 0 #ff0080, 1px -1px #00ffff;
    }
    80% {
        transform: translate(1px, -1px);
        text-shadow: 1px 0 #ff0080, -1px -1px #00ffff;
    }
    90% {
        transform: translate(0);
        text-shadow: 0 0 0 currentColor;
    }
}

.glitch-text {
    animation: glitchText 0.5s ease-in-out;
    position: relative;
    display: inline-block;
}

.glitch-text::before,
.glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    clip-path: inset(0 0 0 0);
}

.glitch-text::before {
    left: -2px;
    color: #ff0080;
    mix-blend-mode: screen;
    animation: glitchBefore 0.3s ease-in-out;
}

.glitch-text::after {
    left: 2px;
    color: #00ffff;
    mix-blend-mode: screen;
    animation: glitchAfter 0.3s ease-in-out;
}

@keyframes glitchBefore {
    0%, 100% { transform: translate(0, 0); opacity: 0.8; }
    25% { transform: translate(-3px, 2px); opacity: 1; }
    50% { transform: translate(3px, -2px); opacity: 0.9; }
    75% { transform: translate(-2px, 3px); opacity: 1; }
}

@keyframes glitchAfter {
    0%, 100% { transform: translate(0, 0); opacity: 0.8; }
    25% { transform: translate(3px, -2px); opacity: 1; }
    50% { transform: translate(-3px, 2px); opacity: 0.9; }
    75% { transform: translate(2px, -3px); opacity: 1; }
}

/* Matrix Rain Effect (Background) */
@keyframes matrixRain {
    0% {
        transform: translateY(-100%);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(100vh);
        opacity: 0;
    }
}

.matrix-rain {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: var(--z-presentation-background);
    overflow: hidden;
}

.matrix-char {
    position: absolute;
    color: hsl(var(--p));
    font-family: 'Courier New', monospace;
    font-size: 14px;
    animation: matrixRain 3s linear infinite;
    text-shadow: 0 0 5px currentColor;
    opacity: 0.7;
}

/* Digital Distortion */
@keyframes digitalDistortion {
    0%, 100% {
        filter: contrast(1) brightness(1) saturate(1);
        transform: scale(1);
    }
    25% {
        filter: contrast(1.5) brightness(1.2) saturate(1.5);
        transform: scale(1.02);
    }
    50% {
        filter: contrast(2) brightness(0.8) saturate(2);
        transform: scale(0.98);
    }
    75% {
        filter: contrast(1.3) brightness(1.1) saturate(1.3);
        transform: scale(1.01);
    }
}

.digital-distortion {
    animation: digitalDistortion 0.6s ease-in-out;
    will-change: filter, transform;
}

/* Energy Pulse */
@keyframes energyPulse {
    0%, 100% {
        box-shadow: 
            0 0 10px hsl(var(--p)),
            0 0 20px hsl(var(--p)),
            0 0 30px hsl(var(--p));
        transform: scale(1);
    }
    50% {
        box-shadow: 
            0 0 20px hsl(var(--p)),
            0 0 40px hsl(var(--p)),
            0 0 60px hsl(var(--p)),
            0 0 80px hsl(var(--p));
        transform: scale(1.1);
    }
}

.energy-pulse {
    animation: energyPulse 1.5s ease-in-out infinite;
}

/* Combo Glow Effect */
@keyframes comboGlow {
    0%, 100% {
        text-shadow: 
            0 0 5px hsl(var(--p)),
            0 0 10px hsl(var(--p)),
            0 0 15px hsl(var(--p));
        filter: brightness(1);
    }
    25% {
        text-shadow: 
            0 0 10px hsl(var(--s)),
            0 0 20px hsl(var(--s)),
            0 0 30px hsl(var(--s));
        filter: brightness(1.2);
    }
    50% {
        text-shadow: 
            0 0 15px hsl(var(--a)),
            0 0 30px hsl(var(--a)),
            0 0 45px hsl(var(--a));
        filter: brightness(1.4);
    }
    75% {
        text-shadow: 
            0 0 10px hsl(var(--wa)),
            0 0 20px hsl(var(--wa)),
            0 0 30px hsl(var(--wa));
        filter: brightness(1.2);
    }
}

.combo-glow {
    animation: comboGlow 2s ease-in-out infinite;
}

/* Achievement Unlock Explosion */
@keyframes achievementExplosion {
    0% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
        filter: blur(0px);
    }
    30% {
        opacity: 1;
        transform: scale(1.5) rotate(180deg);
        filter: blur(2px);
    }
    60% {
        opacity: 0.9;
        transform: scale(2) rotate(360deg);
        filter: blur(4px);
    }
    100% {
        opacity: 0;
        transform: scale(3) rotate(540deg);
        filter: blur(8px);
    }
}

.achievement-explosion {
    position: fixed;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    pointer-events: none;
    z-index: calc(var(--z-presentation-modals) + 90);
    animation: achievementExplosion 1.5s ease-out forwards;
    background: radial-gradient(circle,
        rgba(255, 255, 255, 1) 0%,
        rgba(249, 115, 22, 0.9) 20%,
        rgba(168, 85, 247, 0.7) 40%,
        rgba(59, 130, 246, 0.5) 60%,
        transparent 80%
    );
}

/* Quest Complete Banner Glitch */
@keyframes questBannerGlitch {
    0%, 100% {
        transform: translateX(0) scale(1);
        filter: hue-rotate(0deg);
    }
    10% {
        transform: translateX(-5px) scale(1.02);
        filter: hue-rotate(90deg);
    }
    20% {
        transform: translateX(5px) scale(0.98);
        filter: hue-rotate(180deg);
    }
    30% {
        transform: translateX(-3px) scale(1.01);
        filter: hue-rotate(270deg);
    }
    40% {
        transform: translateX(3px) scale(0.99);
        filter: hue-rotate(360deg);
    }
    50%, 100% {
        transform: translateX(0) scale(1);
        filter: hue-rotate(0deg);
    }
}

.quest-banner-glitch {
    animation: questBannerGlitch 0.8s ease-in-out;
}

/* Score Popup Dramatic Entrance */
@keyframes scorePopupDramatic {
    0% {
        opacity: 0;
        transform: scale(0) rotate(-180deg) translateY(-100px);
        filter: blur(10px);
    }
    30% {
        opacity: 1;
        transform: scale(1.3) rotate(0deg) translateY(0);
        filter: blur(2px);
    }
    50% {
        transform: scale(1.1) rotate(10deg) translateY(-10px);
        filter: blur(0px);
    }
    70% {
        transform: scale(1) rotate(-5deg) translateY(5px);
        filter: blur(0px);
    }
    85% {
        transform: scale(1.05) rotate(0deg) translateY(0);
        filter: blur(0px);
    }
    100% {
        opacity: 0;
        transform: scale(0.8) rotate(0deg) translateY(-50px);
        filter: blur(5px);
    }
}

.score-popup-dramatic {
    animation: scorePopupDramatic 1.5s ease-in-out forwards;
}

/* High Combo Warning Effect */
@keyframes highComboWarning {
    0%, 100% {
        border-color: hsl(var(--p));
        box-shadow: 0 0 10px hsl(var(--p));
        transform: scale(1);
    }
    25% {
        border-color: hsl(var(--wa));
        box-shadow: 0 0 20px hsl(var(--wa));
        transform: scale(1.05);
    }
    50% {
        border-color: hsl(var(--er));
        box-shadow: 0 0 30px hsl(var(--er));
        transform: scale(1.1);
    }
    75% {
        border-color: hsl(var(--wa));
        box-shadow: 0 0 20px hsl(var(--wa));
        transform: scale(1.05);
    }
}

.high-combo-warning {
    animation: highComboWarning 1s ease-in-out infinite;
}

/* Reduce effects for accessibility */
@media (prefers-reduced-motion: reduce) {
    .chromatic-glitch,
    .data-corruption,
    .dramatic-shake,
    .screen-flash,
    .radial-burst-enhanced,
    .glitch-text,
    .digital-distortion,
    .energy-pulse,
    .combo-glow,
    .achievement-explosion,
    .quest-banner-glitch,
    .score-popup-dramatic,
    .high-combo-warning {
        animation: none !important;
        transform: none !important;
        filter: none !important;
    }
    
    .scan-line,
    .matrix-rain {
        display: none !important;
    }
}
